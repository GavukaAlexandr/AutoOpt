// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Type {
  id     Int         @id @default(autoincrement())
  type   String      @db.VarChar(255)
  brands BrandType[]
  model  Model?
}

model Brand {
  id     Int         @id @default(autoincrement())
  brand  String      @db.VarChar(255)
  types  BrandType[]
  models Model[]
}

model BrandType {

  typeId  Int @map("type_id")
  brandId Int @map("brand")

  type  Type  @relation(fields: [typeId], references: [id])
  brand Brand @relation(fields: [brandId], references: [id])
  @@id([typeId, brandId])
  @@map("brand_types")
}

model Model {
  id      Int     @id @default(autoincrement())
  name    String  @db.VarChar(255)
  brandId Int     @map("brand_id")
  typeId  Int     @map("type_id")
  type    Type    @relation(fields: [typeId], references: [id])
  brand   Brand   @relation(fields: [brandId], references: [id])
  order   Order[]
}

model Order {
  id      Int   @id @default(autoincrement())
  modelId Int   @map("model_id")
  userId  Int   @map("user_id")
  user    User  @relation(fields: [userId], references: [id])
  model   Model @relation(fields: [modelId], references: [id])
}

model User {
  id     Int     @id @default(autoincrement())
  name   String  @db.VarChar(255)
  orders Order[]
}
